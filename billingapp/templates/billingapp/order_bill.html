{% extends "billingapp/base.html" %}
{% block content %}
<div class="container" style="max-width:720px;">
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between">
        <div>
          <h5 class="mb-0">Resto</h5>
          <small class="text-muted">Table: {{ order.table.name }}</small>
        </div>
        <div class="text-end">
          <div><b>Bill #{{ order.id }}</b></div>
          <small class="text-muted">{{ order.created_at|date:"d M Y, H:i" }}</small>
        </div>
      </div>
      <hr>
      <table class="table table-sm">
        <thead>
          <tr><th>Item</th><th class="text-end">Qty</th><th class="text-end">Price</th><th class="text-end">Line</th></tr>
        </thead>
        <tbody>
          {% for li in order.items.all %}
          <tr>
            <td>{{ li.item.name }}</td>
            <td class="text-end">{{ li.qty }}</td>
            <td class="text-end">₹ {{ li.item.price }}</td>
            <td class="text-end">₹ {{ li.item.price|floatformat:2|add:""|safe and "" }}{{ li.item.price|add:"0" }}</td>
          </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <th colspan="3" class="text-end">Subtotal</th>
            <th class="text-end">₹ {{ order.subtotal }}</th>
          </tr>
        </tfoot>
      </table>
      <div class="d-grid gap-2">
        <a href="{% url 'track_order' order.id %}" class="btn btn-outline-secondary">Back to Status</a>
        <button onclick="window.print()" class="btn btn-accent">Print / Save PDF</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
